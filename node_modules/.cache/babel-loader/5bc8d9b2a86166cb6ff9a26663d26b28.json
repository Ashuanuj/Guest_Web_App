{"ast":null,"code":"import { camelizeKeys, decamelizeKeys } from 'humps';\nimport fetch from 'isomorphic-fetch';\nimport qs from 'qs';\nexport default function callApi(endpoint, body, method, queryData, isFile = false, outside = false) {\n  console.log(body, method, 'iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii');\n  const headers = new Headers();\n  const accessToken = 'JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNTcwNDc4NDM1LCJleHAiOjE1NzkxMTg0MzV9.PIUtVu9RS7jbqlUyMFhiAAtwInoMaZcTBxGyDp5QvDI'; //localStorage.getItem('accessToken');\n\n  const passwordUpdatedAt = 1556194811; //localStorage.getItem('passwordUpdatedAt');\n\n  let bodyData = body;\n  let queryParams = '';\n\n  if (queryData) {\n    queryParams = \"?\".concat(qs.stringify(queryData, {\n      encode: false,\n      indices: false\n    }));\n  }\n\n  if (!isFile) {\n    headers.append('content-type', 'application/json');\n    bodyData = JSON.stringify(decamelizeKeys(body));\n  }\n\n  if (accessToken) {\n    headers.append('Authorization', accessToken);\n    headers.append('passwordUpdatedAt', passwordUpdatedAt);\n  }\n\n  let URL = 'http://206.189.143.249:70';\n  URL = \"\".concat(URL, \"/\").concat(endpoint).concat(queryParams);\n  console.log(URL, 'eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeerrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr');\n  return fetch(URL, {\n    headers,\n    method: method || (body ? 'post' : 'get'),\n    mode: 'cors',\n    body: bodyData\n  }).then(response => response.json().then(json => ({\n    json,\n    response\n  }))).then(({\n    json,\n    response\n  }) => {\n    console.log(json, response, 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy');\n    const camelizedJson = camelizeKeys(json);\n\n    if (!response.ok) {\n      if (json.logout !== undefined && json.logout.status !== undefined) {\n        try {\n          localStorage.removeItem('userId');\n          localStorage.removeItem('userName');\n          localStorage.removeItem('userImg');\n          localStorage.removeItem('userRoles');\n          localStorage.removeItem('userAppRoles');\n          localStorage.removeItem('accessToken');\n          localStorage.removeItem('voicelayerToken');\n          localStorage.removeItem('voicelayerId');\n          localStorage.removeItem('passwordUpdatedAt'); //  history.push(`/user`);\n\n          return true;\n        } catch (error) {\n          return false;\n        }\n      }\n\n      return Promise.reject(camelizedJson);\n    }\n\n    return camelizedJson.data;\n  });\n}","map":{"version":3,"sources":["/home/ashu/Downloads/helius-app-actions/helius-app-actions/helius-app/src/utility/call-api.js"],"names":["camelizeKeys","decamelizeKeys","fetch","qs","callApi","endpoint","body","method","queryData","isFile","outside","console","log","headers","Headers","accessToken","passwordUpdatedAt","bodyData","queryParams","stringify","encode","indices","append","JSON","URL","mode","then","response","json","camelizedJson","ok","logout","undefined","status","localStorage","removeItem","error","Promise","reject","data"],"mappings":"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","sourcesContent":["import { camelizeKeys, decamelizeKeys } from 'humps';\nimport fetch from 'isomorphic-fetch';\nimport qs from 'qs';\n\nexport default function callApi(endpoint, body, method, queryData, isFile = false, outside = false) {\n     console.log(body, method, 'iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii')\n     const headers = new Headers();\n     const accessToken = 'JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNTcwNDc4NDM1LCJleHAiOjE1NzkxMTg0MzV9.PIUtVu9RS7jbqlUyMFhiAAtwInoMaZcTBxGyDp5QvDI'//localStorage.getItem('accessToken');\n     const passwordUpdatedAt = 1556194811//localStorage.getItem('passwordUpdatedAt');\n     let bodyData = body;\n     let queryParams = '';\n\n     if (queryData) {\n          queryParams = `?${qs.stringify(queryData, { encode: false, indices: false })}`;\n     }\n\n     if (!isFile) {\n          headers.append('content-type', 'application/json');\n          bodyData = JSON.stringify(decamelizeKeys(body));\n     }\n\n     if (accessToken) {\n          headers.append('Authorization', accessToken);\n          headers.append('passwordUpdatedAt', passwordUpdatedAt);\n     }\n\n     let URL = 'http://206.189.143.249:70';\n\n     URL = `${URL}/${endpoint}${queryParams}`;\n\n     console.log(URL, 'eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeerrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr')\n     return fetch(URL, {\n          headers,\n          method: method || (body ? 'post' : 'get'),\n          mode: 'cors',\n          body: bodyData,\n     }).then(response => response.json().then(json => ({ json, response })))\n          .then(({ json, response }) => {\n               console.log(json, response, 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy')\n               const camelizedJson = camelizeKeys(json);\n\n               if (!response.ok) {\n                    if (json.logout !== undefined && json.logout.status !== undefined) {\n                         try {\n                              localStorage.removeItem('userId');\n                              localStorage.removeItem('userName');\n                              localStorage.removeItem('userImg');\n                              localStorage.removeItem('userRoles');\n                              localStorage.removeItem('userAppRoles');\n                              localStorage.removeItem('accessToken');\n                              localStorage.removeItem('voicelayerToken');\n                              localStorage.removeItem('voicelayerId');\n                              localStorage.removeItem('passwordUpdatedAt');\n                              //  history.push(`/user`);\n                              return true;\n                         }\n                         catch (error) {\n                              return false;\n                         }\n                    }\n                    return Promise.reject(camelizedJson);\n               }\n\n               return camelizedJson.data;\n          });\n}"]},"metadata":{},"sourceType":"module"}